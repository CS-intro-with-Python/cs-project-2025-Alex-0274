<div class="card task-card {% if task.is_done %}task-done{% endif %}" data-task-id="{{ task.id }}">
  <div class="card-body d-flex align-items-start gap-3">
    <div class="pt-1">
      <input class="form-check-input js-toggle" type="checkbox" {% if task.is_done %}checked{% endif %} aria-label="toggle done">
    </div>

    <div class="flex-grow-1">
      <div class="d-flex flex-wrap align-items-center gap-2">
        <h5 class="mb-0 task-title">{{ task.title }}</h5>

        {% if task.priority == 3 %}
          <span class="badge text-bg-danger">High</span>
        {% elif task.priority == 2 %}
          <span class="badge text-bg-warning">Medium</span>
        {% else %}
          <span class="badge text-bg-secondary">Low</span>
        {% endif %}

        {% if task.is_done %}
          <span class="badge text-bg-success">Done</span>
        {% endif %}

        {% if task.due_date %}
          <span class="badge {% if task.is_overdue() %}text-bg-danger{% else %}text-bg-light border{% endif %}">
            Due: {{ task.due_date.strftime("%Y-%m-%d") }}
          </span>
        {% endif %}
      </div>

      {% if task.description %}
        <p class="mb-0 mt-2 text-secondary small task-desc">{{ task.description }}</p>
      {% endif %}
    </div>

    <div class="d-flex gap-2">
      <a class="btn btn-sm btn-outline-primary" href="{{ url_for('main.task_edit_get', task_id=task.id) }}">Edit</a>
      <button class="btn btn-sm btn-outline-danger js-delete" type="button">Delete</button>
    </div>
  </div>
</div>
